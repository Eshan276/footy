# Import necessary classes and modules
#:import NoTransition kivy.uix.screenmanager.NoTransition
#:import SlideTransition kivy.uix.screenmanager.SlideTransition

# Define the screens and their layouts
ScreenManager:
	transition: SlideTransition()  # You can customize the transition animation here

	MenuScreen:
		name: 'menu'


	TicTacToeScreen:
		name: 'tictactoe'

<MenuScreen>:
    MDFloatLayout:
        MDLabel:
            text: "Footy Tic Tac Toe"
            font_size: "50sp"
            halign: "center"
            pos_hint: {"center_x": .5, "center_y": .8}

        MDLabel:
            text: "Grid Configuration Settings"
            font_size: "25sp"
            halign: "center"
            pos_hint: {"center_x": .5, "center_y": .7}

        MDLabel:
            text: "Top 20 Teams-Grid"
            font_size: "20sp"
            halign: "center"
            pos_hint: {"center_x": .45, "center_y": .6}
        
        MDTextField:
            size_hint: .35, .1
            pos_hint: {'center_x': .52, 'center_y': .5}
            id: team_search_field
            hint_text: 'Search teamname'
            helper_text: "Select Teams to be included into grid (min. 6)"
            on_text: root.add_team_name(self.text)

        MDDropdownMenu:
            id: dropdown_menu_1
            caller: team_search_field  # Use the id directly since it's in the same rule
            items: []
            width_mult: 4

        MDSwitch:
            active: True
            pos_hint: {"center_x": .65, "center_y": .6}

        MDRectangleFlatButton:
            text: "Play Tic Tac Toe"
            size_hint: .3, .1
            color: 0, 0, 0, 1
            pos_hint: {"center_x": 0.5, "center_y": 0.1}
            on_release: root.open_tictactoe_screen()



<TicTacToeScreen>:
	MDFloatLayout:
		MDTextField:
			size_hint: .3, .1
			pos_hint: {'center_x': .5, 'center_y': .9}
			id: search_field
			hint_text: 'Search player'
			on_text: root.on_text(self, self.text)
		
		MDDropdownMenu:
            id: dropdown_menu
            caller: search_field
            items: []
			width_mult: 4

		MDLabel:
			id: labell

		MDRaisedButton:
			id : help
			text : "Help (Show #players for combination)"
			font_size: "20sp"
			size_hint: .25, .1
			pos_hint: {'center_x': .9, 'center_y': .6}

		MDRaisedButton:
			id : solve grid
			text : "solve this grid"
			font_size: "20sp"
			size_hint: .25, .1
			pos_hint: {'center_x': .9, 'center_y': .4}

		MDRaisedButton:
			id : reroll_combinations
			text : "Reroll teams"
			font_size: "20sp"
			size_hint: .25, .1
			pos_hint: {'center_x': .5, 'center_y': .15}
			on_release: root.next_combination()

		MDGridLayout:
			size_hint: .5, .5
			pos_hint: {'center_x': .4375, 'center_y': .6}
			cols: 4
			rows: 4

			MDLabel:
				id: lab0
				text: ""
				font_size: "45sp"
				halign : "center"

			MDLabel:
				id: lab1
				text: root.team1_name
				font_size: "20sp"
				halign : "center"

			MDLabel:
				id: lab2
				text: root.team2_name
				font_size: "20sp"
				halign : "center"

			MDLabel:
				id: lab3
				text: root.team3_name
				font_size: "20sp"
				halign : "center"

			MDLabel:
				id: lab4
				text: root.team4_name
				font_size: "20sp"
				halign : "center"

			Button:
				id: btn1
				text: ""
				font_size: "45sp"
				on_release: root.presser(btn1)

			Button:
				id: btn2
				text: ""
				font_size: "45sp"
				on_release: root.presser(btn2)

			Button:
				id: btn3
				text: ""
				font_size: "45sp"
				on_release: root.presser(btn3)


			MDLabel:
				id: lab5
				text: root.team5_name
				font_size: "20sp"
				halign : "center"

			Button:
				id: btn4
				text: ""
				font_size: "45sp"
				on_release: root.presser(btn4)

			Button:
				id: btn5
				text: ""
				font_size: "45sp"
				on_release: root.presser(btn5)

			Button:
				id: btn6
				text: ""
				font_size: "45sp"
				on_release: root.presser(btn6)			

			MDLabel:
				id: lab6
				text: root.team6_name
				font_size: "20sp"
				halign : "center"


			Button:
				id: btn7
				text: ""
				font_size: "45sp"
				on_release: root.presser(btn7)

			Button:
				id: btn8
				text: ""
				font_size: "45sp"
				on_release: root.presser(btn8)

			Button:
				id: btn9
				text: ""
				font_size: "45sp"
				on_release: root.presser(btn9)


		MDLabel:
			id: game
			font_size: "14sp"
			text: "X Wins: 0  |  O Wins: 0"
			halign: "center"
			pos_hint: {"center_x": .5, "center_y": .05}	
		
		Button:
			text: "Return to Start Screen"
			size_hint: .1, .1
			pos_hint: {"center_x": .7, "center_y": .05}	
			font_size: "12sp"
			on_press: root.manager.current = "lists"
